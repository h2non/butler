/*! butler - v0.1.0 - MIT License - https://github.com/h2non/butler */
!function(r){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.butler=r()}}(function(){var r,e,n;return function t(r,e,n){function i(u,f){if(!e[u]){if(!r[u]){var c=typeof require=="function"&&require;if(!f&&c)return c(u,!0);if(o)return o(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var s=e[u]={exports:{}};r[u][0].call(s.exports,function(e){var n=r[u][1][e];return i(n?n:e)},s,s.exports,t,r,e,n)}return e[u].exports}var o=typeof require=="function"&&require;for(var u=0;u<n.length;u++)i(n[u]);return i}({1:[function(r,e,n){var t=r("./store");var i=r("./service");var o=r("./utils").merge;var u="serviceWorker"in navigator;e.exports=f;function f(r,e){var n=c(e)}f.VERSION="0.1.0-beta.1";f.workerPath="/butler.worker.js";f.isControllable=f.isEnabled=function(){return navigator.serviceWorker.controller!=null};f.stop=function(){return i().unregister()};f.cleanAll=function(){t.flush();return i().flush()};f.entries=function(){return t.all()};function c(r){if(!u){throw new Error("ServiceWorker is not supported in the current browser")}return i(o({path:f.workerPath},r))}},{"./service":2,"./store":3,"./utils":4}],2:[function(r,e,n){var t=navigator.serviceWorker;var i=null;var o=null;e.exports=u;function u(r){if(!i){i=new f(r)}return i}function f(r){this.service=s(r)}f.prototype.append=function(r,e){return c.call(this,{topic:"butler.append",id:r,config:e})};f.prototype.remove=function(r){return c.call(this,{topic:"butler.remove",id:r})};f.prototype.flush=function(r){return c.call(this,{topic:"butler.flush"})};f.prototype.unregister=function(){if(o){return o.unregister()}else{return Promise.resolve(null)}};function c(r){return new Promise(function(e,n){this.service().then(function(n){var t=l(n);t.postMessage(r);e(t)}).catch(n)}.bind(this))}function l(r){o=r;if(r.installing){return r.installing}else{return r.active}}function s(r){return function(){if(o){return Promise.resolve(o)}else{return t.register(r.path,{scope:a(r)})}}}function a(r){var e=r.path;if(!/^http[s]?\/\//i.test(e)){e=location.origin+e}return new URL(e).pathname.split("/").slice(0,-1).join("/")+"/"}},{}],3:[function(r,e,n){var t=[];var i=n;i.append=function(r){t.push(r)};i.remove=function(r){var e=i.get(r);if(e)t.splice(t.indexOf(e),1)};i.get=function(r){var e,n,i=typeof r==="string";for(e=0,n=t.length;e<n;e+=1){if(i&&t[e].id===r||t[e]===r){return t[e]}}return null};i.all=function(){return t.map(function(r){return{id:r.id,config:r.config}})};i.flush=function(){t.splice(0)}},{}],4:[function(r,e,n){n.merge=function(r,e){var e=Array.prototype.slice.call(arguments).slice(1);e.forEach(function(e){for(var n in e){r[n]=e[n]}});return r};n.uuid=function(){var r="",e,n;for(e=0;e<32;e++){n=Math.random()*16|0;if(e===8||e===12||e===16||e===20)r+="-";r+=(e===12?4:e===16?n&3|8:n).toString(16)}return r}},{}]},{},[1])(1)});
//# sourceMappingURL=http://cdn.rawgit.com/h2non/butler/0.1.0/butler.min.js.map